# Global Instructions
## Language
- 대화는 한국어로 한다.
- 코드, 커밋 메시지, 주석, 문서는 영어로 작성한다.
## General Principles
- 동작하는 가장 단순한 코드를 먼저 작성한다.
- 변경 전에 기존 코드의 의도를 파악한다. 확신이 없으면 먼저 질문한다.
- 요청받지 않은 리팩토링을 하지 않는다.
- 한 번에 하나의 논리적 변경만 수행한다.
## Code Style
- 함수는 하나의 역할만 담당하며, 30줄을 넘기지 않도록 노력한다.
- 매직 넘버 대신 이름이 있는 상수를 사용한다.
- 중첩을 줄이기 위해 early return을 적극 활용한다.
- 주석은 "왜(why)"를 설명할 때만 작성한다. "무엇(what)"은 코드 자체로 표현한다.
- 사용하지 않는 코드는 주석 처리하지 말고 삭제한다.
## Naming
- 기존 코드베이스의 네이밍 컨벤션을 우선 따른다.
- 변수명과 함수명은 축약 없이 의미를 명확히 전달한다.
- 불리언은 `is`, `has`, `should` 등의 접두어를 사용한다.
- 컬렉션은 복수형을 사용한다: `users`, `items`.
## Error Handling
- 에러를 무시하지 않는다. 처리하거나 명시적으로 상위로 전파한다.
- 에러 메시지에는 디버깅에 필요한 맥락을 포함한다.
- 예상 가능한 실패와 예상 불가능한 실패를 구분하여 처리한다.
## Testing
- 새 기능에는 테스트를 함께 작성한다.
- 버그 수정 시 해당 버그를 재현하는 테스트를 먼저 작성한다.
- 테스트 이름은 기존 코드베이스의 컨벤션을 따른다. 컨벤션이 없는 경우 행위와 조건이 드러나도록 작성한다.
- 외부 의존성은 mock 처리하되, 비즈니스 로직은 mock하지 않는다.
## Git
- 커밋 메시지는 conventional commits 형식을 따른다: `feat:`, `fix:`, `refactor:`, `docs:`, `test:`, `chore:`.
- 제목은 50자 이내, 본문은 72자에서 줄바꿈한다.
- 하나의 커밋에는 하나의 논리적 변경만 포함한다.
- 행위적 변경(기능 추가, 버그 수정)과 구조적 변경(리팩토링, 포맷팅)을 같은 커밋에 섞지 않는다.
## Security
- 비밀값(API key, password, token)을 코드에 하드코딩하지 않는다.
- 사용자 입력은 항상 검증하고, SQL이나 명령어에 직접 삽입하지 않는다.
- 의존성 추가 시 보안 이슈가 없는지 확인한다.
## Workflow
- 커밋, push, PR 생성 등 작업을 확정짓는 행위는 사용자가 명시적으로 요청한 경우에만 수행한다. 코드 변경 요청만으로 임의로 커밋하거나 push하지 않는다.
- 커밋 요청과 push 요청은 별개로 취급한다. "커밋해줘"는 로컬 커밋만 수행하며, 명시적으로 push를 요청받지 않는 한 push하지 않는다.
- 커밋 실행 전에 커밋 메시지(제목 + 본문), author, committer 정보를 출력하여 사용자가 검토할 수 있도록 한다.
- PR 생성 시 assignee에 사용자를 지정하고, draft 상태로 생성한다. 생성 전에 작업 디렉토리의 PR 템플릿(`.github/pull_request_template.md` 등)을 먼저 확인하고, 있다면 템플릿에 맞춰 작성한다.
- 파일을 수정하기 전에 관련 코드를 먼저 읽는다.
- 변경 후에는 관련 테스트를 실행하여 검증한다.
- 빌드가 깨지는 상태로 두지 않는다.
- 큰 작업은 단계별 계획을 세운 뒤 진행한다.
